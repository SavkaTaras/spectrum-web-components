import{I as e}from"./162d17ac.js";import{x as t}from"./e6d35ea0.js";import{l as n}from"./660f0d27.js";import{n as s}from"./c34bcf8e.js";import{i as o}from"./17348440.js";import{d as i}from"./25a3ae37.js";class r{constructor(){this.iconsetMap=new Map}static getInstance(){return r.instance||(r.instance=new r),r.instance}addIconset(e,t){this.iconsetMap.set(e,t);const n=new CustomEvent("sp-iconset-added",{bubbles:!0,composed:!0,detail:{name:e,iconset:t}});setTimeout((()=>window.dispatchEvent(n)),0)}removeIconset(e){this.iconsetMap.delete(e);const t=new CustomEvent("sp-iconset-removed",{bubbles:!0,composed:!0,detail:{name:e}});setTimeout((()=>window.dispatchEvent(t)),0)}getIconset(e){return this.iconsetMap.get(e)}}var a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=(e,t,n,s)=>{for(var o,i=s>1?void 0:s?c(t,n):t,r=e.length-1;r>=0;r--)(o=e[r])&&(i=(s?o(t,n,i):o(i))||i);return s&&i&&a(t,n,i),i};class p extends e{constructor(){super(...arguments),this.iconsetListener=e=>{if(!this.name)return;const t=this.parseIcon(this.name);e.detail.name===t.iconset&&(this.updateIconPromise=this.updateIcon())}}connectedCallback(){super.connectedCallback(),window.addEventListener("sp-iconset-added",this.iconsetListener)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("sp-iconset-added",this.iconsetListener)}firstUpdated(){this.updateIconPromise=this.updateIcon()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),this.updateIconPromise=this.updateIcon()}announceIconImageSrcError(){this.dispatchEvent(new Event("error",{cancelable:!1,bubbles:!1,composed:!1}))}render(){return this.name?t`
                <div id="container"></div>
            `:this.src?t`
                <img
                    src="${this.src}"
                    alt=${n(this.label)}
                    @error=${this.announceIconImageSrcError}
                />
            `:super.render()}async updateIcon(){if(this.updateIconPromise&&await this.updateIconPromise,!this.name)return Promise.resolve();const e=this.parseIcon(this.name),t=r.getInstance().getIconset(e.iconset);return t&&this.iconContainer?(this.iconContainer.innerHTML="",t.applyIconToElement(this.iconContainer,e.icon,this.size||"",this.label?this.label:"")):Promise.resolve()}parseIcon(e){const t=e.split(":");let n="default",s=e;return t.length>1&&(n=t[0],s=t[1]),{iconset:n,icon:s}}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.updateIconPromise,e}}d([s()],p.prototype,"src",2),d([s()],p.prototype,"name",2),d([o("#container")],p.prototype,"iconContainer",2),i("sp-icon",p);export{r as I};
//# sourceMappingURL=2e19a3e5.js.map
