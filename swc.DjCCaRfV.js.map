{"version":3,"file":"swc.I0tIeYkQ.js","sources":["../../../tools/theme/src/Theme.js"],"sourcesContent":["\"use strict\";import{supportsAdoptingStyleSheets as m}from\"@spectrum-web-components/base\";import{version as h}from\"@spectrum-web-components/base/src/version.js\";const d=[\"spectrum\",\"express\",\"spectrum-two\"],c=[\"medium\",\"large\",\"medium-express\",\"large-express\",\"medium-spectrum-two\",\"large-spectrum-two\"],p=[\"light\",\"lightest\",\"dark\",\"darkest\",\"light-express\",\"lightest-express\",\"dark-express\",\"darkest-express\",\"light-spectrum-two\",\"dark-spectrum-two\"],r=class r extends HTMLElement{constructor(){super();this._dir=\"\";this._system=\"spectrum\";this._color=\"\";this._scale=\"\";this.trackedChildren=new Set;this._updateRequested=!1;this._contextConsumers=new Map;this.attachShadow({mode:\"open\"});const e=document.importNode(r.template.content,!0);this.shadowRoot.appendChild(e),this.shouldAdoptStyles(),this.addEventListener(\"sp-query-theme\",this.onQueryTheme),this.addEventListener(\"sp-language-context\",this._handleContextPresence),this.updateComplete=this.__createDeferredPromise()}static get observedAttributes(){return[\"color\",\"scale\",\"lang\",\"dir\",\"system\",\"theme\"]}set dir(e){if(e===this.dir)return;this.setAttribute(\"dir\",e),this._dir=e;const t=e===\"rtl\"?e:\"ltr\";this.trackedChildren.forEach(s=>{s.setAttribute(\"dir\",t)})}get dir(){return this._dir}attributeChangedCallback(e,t,s){t!==s&&(e===\"color\"?this.color=s:e===\"scale\"?this.scale=s:e===\"lang\"&&s?(this.lang=s,this._provideContext()):e===\"theme\"?this.theme=s:e===\"system\"?this.system=s:e===\"dir\"&&(this.dir=s))}requestUpdate(){window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.styleElement(this):this.shouldAdoptStyles()}get system(){const e=r.themeFragmentsByKind.get(\"system\"),{name:t}=e&&e.get(\"default\")||{};return this._system||t||\"\"}set system(e){if(e===this._system)return;const t=e&&d.includes(e)?e:this.system;t!==this._system&&(this._system=t,this.requestUpdate()),t?this.setAttribute(\"system\",t):this.removeAttribute(\"system\")}get theme(){return this.system||this.removeAttribute(\"system\"),this.system}set theme(e){this.system=e,this.requestUpdate()}get color(){const e=r.themeFragmentsByKind.get(\"color\"),{name:t}=e&&e.get(\"default\")||{};return this._color||t||\"\"}set color(e){if(e===this._color)return;const t=e&&p.includes(e)?e:this.color;t!==this._color&&(this._color=t,this.requestUpdate()),t?this.setAttribute(\"color\",t):this.removeAttribute(\"color\")}get scale(){const e=r.themeFragmentsByKind.get(\"scale\"),{name:t}=e&&e.get(\"default\")||{};return this._scale||t||\"\"}set scale(e){if(e===this._scale)return;const t=e&&c.includes(e)?e:this.scale;t!==this._scale&&(this._scale=t,this.requestUpdate()),t?this.setAttribute(\"scale\",t):this.removeAttribute(\"scale\")}get styles(){const e=[...r.themeFragmentsByKind.keys()],t=(a,i,n)=>{const o=n&&n!==\"theme\"&&n!==\"system\"&&this.theme!==\"spectrum\"&&this.system!==\"spectrum\"?a.get(`${i}-${this.system}`):a.get(i),l=i===\"spectrum\"||!n||this.hasAttribute(n);if(o&&l)return o.styles};return[...e.reduce((a,i)=>{const n=r.themeFragmentsByKind.get(i);let o;if(i===\"app\"||i===\"core\")o=t(n,i);else{const{[i]:l}=this;o=t(n,l,i)}return o&&a.push(o),a},[])]}static get template(){return this.templateElement||(this.templateElement=document.createElement(\"template\"),this.templateElement.innerHTML=\"<slot></slot>\"),this.templateElement}__createDeferredPromise(){return new Promise(e=>{this.__resolve=e})}onQueryTheme(e){if(e.defaultPrevented)return;e.preventDefault();const{detail:t}=e;t.color=this.color||void 0,t.scale=this.scale||void 0,t.lang=this.lang||document.documentElement.lang||navigator.language,t.theme=this.system||void 0,t.system=this.system||void 0}connectedCallback(){if(this.shouldAdoptStyles(),window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this),r.instances.add(this),!this.hasAttribute(\"dir\")){let e=this.assignedSlot||this.parentNode;for(;e!==document.documentElement&&!(e instanceof r);)e=e.assignedSlot||e.parentNode||e.host;this.dir=e.dir===\"rtl\"?e.dir:\"ltr\"}}disconnectedCallback(){r.instances.delete(this)}startManagingContentDirection(e){this.trackedChildren.add(e)}stopManagingContentDirection(e){this.trackedChildren.delete(e)}async shouldAdoptStyles(){this._updateRequested||(this.updateComplete=this.__createDeferredPromise(),this._updateRequested=!0,this._updateRequested=await!1,this.adoptStyles(),this.__resolve(!0))}adoptStyles(){const e=this.styles;if(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow&&window.ShadyCSS.ScopingShim){const t=[];for(const[s,a]of r.themeFragmentsByKind)for(const[i,{styles:n}]of a){if(i===\"default\")continue;let o=n.cssText;r.defaultFragments.has(i)||(o=o.replace(\":host\",`:host([${s}='${i}'])`)),t.push(o)}window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t,this.localName),window.ShadyCSS.prepareTemplate(r.template,this.localName)}else if(m){const t=[];for(const s of e)t.push(s.styleSheet);this.shadowRoot.adoptedStyleSheets=t}else this.shadowRoot.querySelectorAll(\"style\").forEach(s=>s.remove()),e.forEach(s=>{const a=document.createElement(\"style\");a.textContent=s.cssText,this.shadowRoot.appendChild(a)})}static registerThemeFragment(e,t,s){const a=r.themeFragmentsByKind.get(t)||new Map;a.size===0&&(r.themeFragmentsByKind.set(t,a),a.set(\"default\",{name:e,styles:s}),r.defaultFragments.add(e)),a.set(e,{name:e,styles:s}),r.instances.forEach(i=>i.shouldAdoptStyles())}_provideContext(){this._contextConsumers.forEach(([e,t])=>e(this.lang,t))}_handleContextPresence(e){e.stopPropagation();const t=e.composedPath()[0];if(this._contextConsumers.has(t))return;this._contextConsumers.set(t,[e.detail.callback,()=>this._contextConsumers.delete(t)]);const[s,a]=this._contextConsumers.get(t)||[];s&&a&&s(this.lang||document.documentElement.lang||navigator.language,a)}};r.themeFragmentsByKind=new Map,r.defaultFragments=new Set([\"spectrum\"]),r.instances=new Set,r.VERSION=h;export let Theme=r;\n//# sourceMappingURL=Theme.js.map\n"],"names":["d","c","p","r","HTMLElement","constructor","super","this","_dir","_system","_color","_scale","trackedChildren","Set","_updateRequested","_contextConsumers","Map","attachShadow","mode","e","document","importNode","template","content","shadowRoot","appendChild","shouldAdoptStyles","addEventListener","onQueryTheme","_handleContextPresence","updateComplete","__createDeferredPromise","observedAttributes","dir","setAttribute","t","forEach","s","attributeChangedCallback","color","scale","lang","_provideContext","theme","system","requestUpdate","window","ShadyCSS","nativeShadow","styleElement","themeFragmentsByKind","get","name","includes","removeAttribute","styles","keys","getStyle","a","i","n","o","l","hasAttribute","reduce","push","templateElement","createElement","innerHTML","Promise","__resolve","defaultPrevented","preventDefault","detail","documentElement","navigator","language","connectedCallback","instances","add","assignedSlot","parentNode","host","disconnectedCallback","delete","startManagingContentDirection","stopManagingContentDirection","adoptStyles","ScopingShim","cssText","defaultFragments","has","replace","prepareAdoptedCssText","localName","prepareTemplate","m","styleSheet","adoptedStyleSheets","querySelectorAll","remove","textContent","registerThemeFragment","size","set","stopPropagation","composedPath","callback","VERSION","h","Theme"],"mappings":"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"}