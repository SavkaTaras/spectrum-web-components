import{w as e}from"./swc.DAPqj1CM.js";import{e as s,i as t,t as r}from"./swc.8Y9xgsp7.js";import{p as o,v as l,r as n,h as i,m as u}from"./swc.BL2UQhum.js";const f=(e,s,t)=>{const r=new Map;for(let o=s;o<=t;o++)r.set(e[o],o);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const o=[],l=[];let n=0;for(const s of e)o[n]=r?r(s,n):n,l[n]=t(s,n),n++;return{values:l,keys:o}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const a=o(s),{values:d,keys:h}=this.dt(t,r,c);if(!Array.isArray(a))return this.ut=h,d;const p=this.ut??=[],v=[];let m,y,w=0,j=a.length-1,x=0,g=d.length-1;for(;w<=j&&x<=g;)if(null===a[w])w++;else if(null===a[j])j--;else if(p[w]===h[x])v[x]=l(a[w],d[x]),w++,x++;else if(p[j]===h[g])v[g]=l(a[j],d[g]),j--,g--;else if(p[w]===h[g])v[g]=l(a[w],d[g]),n(s,v[g+1],a[w]),w++,g--;else if(p[j]===h[x])v[x]=l(a[j],d[x]),n(s,a[w],a[j]),j--,x++;else if(void 0===m&&(m=f(h,x,g),y=f(p,w,j)),m.has(p[w]))if(m.has(p[j])){const e=y.get(h[x]),t=void 0!==e?a[e]:null;if(null===t){const e=n(s,a[w]);l(e,d[x]),v[x]=e}else v[x]=l(t,d[x]),n(s,a[w],t),a[e]=null;x++}else i(a[j]),j--;else i(a[w]),w++;for(;x<=g;){const e=n(s,v[g+1]);l(e,d[x]),v[x++]=e}for(;w<=j;){const e=a[w++];null!==e&&i(e)}return this.ut=h,u(s,v),e}});export{c};
//# sourceMappingURL=swc.DJCbP0xi.js.map
