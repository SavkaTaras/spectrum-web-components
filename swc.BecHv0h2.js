import{w as e}from"./swc.DAPqj1CM.js";import{e as s,i as t,t as r}from"./swc.CUjw98Wr.js";import{p as l,v as o,r as n,h as i,m as u}from"./swc.BL2UQhum.js";const f=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let n=0;for(const s of e)l[n]=r?r(s,n):n,o[n]=t(s,n),n++;return{values:o,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const a=l(s),{values:d,keys:h}=this.dt(t,r,c);if(!Array.isArray(a))return this.ut=h,d;const p=this.ut??=[],v=[];let m,y,w=0,x=a.length-1,g=0,j=d.length-1;for(;w<=x&&g<=j;)if(null===a[w])w++;else if(null===a[x])x--;else if(p[w]===h[g])v[g]=o(a[w],d[g]),w++,g++;else if(p[x]===h[j])v[j]=o(a[x],d[j]),x--,j--;else if(p[w]===h[j])v[j]=o(a[w],d[j]),n(s,v[j+1],a[w]),w++,j--;else if(p[x]===h[g])v[g]=o(a[x],d[g]),n(s,a[w],a[x]),x--,g++;else if(void 0===m&&(m=f(h,g,j),y=f(p,w,x)),m.has(p[w]))if(m.has(p[x])){const e=y.get(h[g]),t=void 0!==e?a[e]:null;if(null===t){const e=n(s,a[w]);o(e,d[g]),v[g]=e}else v[g]=o(t,d[g]),n(s,a[w],t),a[e]=null;g++}else i(a[x]),x--;else i(a[w]),w++;for(;g<=j;){const e=n(s,v[j+1]);o(e,d[g]),v[g++]=e}for(;w<=x;){const e=a[w++];null!==e&&i(e)}return this.ut=h,u(s,v),e}});export{c};
//# sourceMappingURL=swc.BqJzSokE.js.map
