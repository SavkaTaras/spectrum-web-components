{"version":3,"file":"swc.BIMqvYUo.js","sources":["../../../packages/overlay/src/InteractionController.js","../../../packages/overlay/src/AbstractOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../tools/shared/src/reparent-children.js","../../../tools/shared/src/platform.js","../../../packages/overlay/src/LongpressController.js","../../../packages/overlay/src/strategies.js","../../../packages/overlay/src/ClickController.js","../../../packages/overlay/src/HoverController.js"],"sourcesContent":["\"use strict\";export var InteractionTypes=(r=>(r[r.click=0]=\"click\",r[r.hover=1]=\"hover\",r[r.longpress=2]=\"longpress\",r))(InteractionTypes||{});export class InteractionController{constructor(e,{overlay:t,isPersistent:r,handleOverlayReady:i}){this.target=e;this.isPersistent=!1;this.isPersistent=!!r,this.handleOverlayReady=i,this.isPersistent&&this.init(),this.overlay=t}get activelyOpening(){return!1}get open(){var e,t;return(t=(e=this.overlay)==null?void 0:e.open)!=null?t:!1}set open(e){if(this.overlay){this.overlay.open=e;return}e&&(customElements.whenDefined(\"sp-overlay\").then(async()=>{const{Overlay:t}=await import(\"./Overlay.js\");this.overlay=new t,this.overlay.open=!0}),import(\"@spectrum-web-components/overlay/sp-overlay.js\"))}get overlay(){return this._overlay}set overlay(e){var t;e&&this.overlay!==e&&(this.overlay&&this.overlay.removeController(this),this._overlay=e,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(t=this.handleOverlayReady)==null||t.call(this,this.overlay))}prepareDescription(e){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var e;this.releaseDescription(),(e=this.abortController)==null||e.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}\n//# sourceMappingURL=InteractionController.js.map\n","\"use strict\";import{SpectrumElement as g}from\"@spectrum-web-components/base\";import{reparentChildren as b}from\"@spectrum-web-components/shared/src/reparent-children.js\";import{OverlayTimer as O}from\"./overlay-timer.js\";export const overlayTimer=new O,noop=()=>{},guaranteedAllTransitionend=(i,v,e)=>{const r=new AbortController,n=new Map,a=()=>{r.abort(),e()};let m,l;const t=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{l=requestAnimationFrame(()=>{a()})})}),p=o=>{o.target===i&&(n.set(o.propertyName,n.get(o.propertyName)-1),n.get(o.propertyName)||n.delete(o.propertyName),n.size===0&&a())},d=o=>{o.target===i&&(n.has(o.propertyName)||n.set(o.propertyName,0),n.set(o.propertyName,n.get(o.propertyName)+1),cancelAnimationFrame(t),cancelAnimationFrame(m),cancelAnimationFrame(l))};i.addEventListener(\"transitionrun\",d,{signal:r.signal}),i.addEventListener(\"transitionend\",p,{signal:r.signal}),i.addEventListener(\"transitioncancel\",p,{signal:r.signal}),v()};export function nextFrame(){return new Promise(i=>requestAnimationFrame(()=>i()))}export class AbstractOverlay extends g{constructor(){super(...arguments);this.dispose=noop;this.offset=0;this.willPreventClose=!1}async applyFocus(e,r){}get delayed(){return!1}set delayed(e){}get disabled(){return!1}set disabled(e){}get elementResolver(){return this._elementResolver}set elementResolver(e){this._elementResolver=e}async ensureOnDOM(e){}async makeTransition(e){return null}async manageDelay(e){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(e){}get placementController(){return this._placementController}set placementController(e){this._placementController=e}requestSlottable(){}returnFocus(){}get state(){return\"closed\"}set state(e){}manuallyKeepOpen(){}static update(){const e=new CustomEvent(\"sp-update-overlays\",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}static async open(e,r,n,a){await import(\"@spectrum-web-components/overlay/sp-overlay.js\");const m=arguments.length===2,l=n||e,t=new this;let p=!1;t.dispose=()=>{t.addEventListener(\"sp-closed\",()=>{p||(d(),p=!0),requestAnimationFrame(()=>{t.remove()})}),t.open=!1,t.dispose=noop};const d=b([l],t,{position:\"beforeend\",prepareCallback:s=>{const c=s.slot;return s.removeAttribute(\"slot\"),()=>{s.slot=c}}});if(!m&&l&&a){const s=e,c=r,u=a;return AbstractOverlay.applyOptions(t,{...u,delayed:u.delayed||l.hasAttribute(\"delayed\"),trigger:u.virtualTrigger||s,type:c===\"modal\"?\"modal\":c===\"hover\"?\"hint\":\"auto\"}),s.insertAdjacentElement(\"afterend\",t),await t.updateComplete,t.open=!0,t.dispose}const y=r;return t.append(l),AbstractOverlay.applyOptions(t,{...y,delayed:y.delayed||l.hasAttribute(\"delayed\")}),t.updateComplete.then(()=>{t.open=!0}),t}static applyOptions(e,r){var n,a;e.delayed=!!r.delayed,e.receivesFocus=(n=r.receivesFocus)!=null?n:\"auto\",e.triggerElement=r.trigger||null,e.type=r.type||\"modal\",e.offset=(a=r.offset)!=null?a:0,e.placement=r.placement,e.willPreventClose=!!r.notImmediatelyClosable}}\n//# sourceMappingURL=AbstractOverlay.js.map\n","\"use strict\";const t=1e3,s=1e3;export class OverlayTimer{constructor(e={}){this.warmUpDelay=1e3;this.coolDownDelay=1e3;this.isWarm=!1;this.timeout=0;Object.assign(this,e)}async openTimer(e){if(this.cancelCooldownTimer(),!this.component||e!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=e,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error(\"Inconsistent state\")}close(e){this.component&&this.component===e&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}\n//# sourceMappingURL=overlay-timer.js.map\n","\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";function n(o){return typeof window!=\"undefined\"&&window.navigator!=null?o.test(window.navigator.userAgent):!1}function e(o){return typeof window!=\"undefined\"&&window.navigator!=null?o.test(window.navigator.platform):!1}export function isMac(){return e(/^Mac/)}export function isIPhone(){return e(/^iPhone/)}export function isIPad(){return e(/^iPad/)||isMac()&&navigator.maxTouchPoints>1}export function isIOS(){return isIPhone()||isIPad()}export function isAppleDevice(){return isMac()||isIOS()}export function isWebKit(){return n(/AppleWebKit/)&&!isChrome()}export function isChrome(){return n(/Chrome/)}export function isFirefox(){return n(/Firefox/)&&!isSeamonkey()}export function isSeamonkey(){return n(/Seamonkey/)}export function isAndroid(){return n(/Android/)}\n//# sourceMappingURL=platform.js.map\n","\"use strict\";import{isAndroid as a,isIOS as d}from\"@spectrum-web-components/shared/src/platform.js\";import{conditionAttributeWithId as p}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as l}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as r}from\"./AbstractOverlay.js\";import{InteractionController as h,InteractionTypes as c}from\"./InteractionController.js\";const g=300;export const LONGPRESS_INSTRUCTIONS={touch:\"Double tap and long press for additional options\",keyboard:\"Press Space or Alt+Down Arrow for additional options\",mouse:\"Click and hold for additional options\"};export class LongpressController extends h{constructor(){super(...arguments);this.type=c.longpress;this.longpressState=null;this.releaseDescription=r;this.handlePointerup=()=>{var e;clearTimeout(this.timeout),this.target&&(this.longpressState=((e=this.overlay)==null?void 0:e.state)===\"opening\"?\"pressed\":null,document.removeEventListener(\"pointerup\",this.handlePointerup),document.removeEventListener(\"pointercancel\",this.handlePointerup))}}get activelyOpening(){return this.longpressState===\"opening\"||this.longpressState===\"pressed\"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState===\"potential\"?\"opening\":\"pressed\"}handlePointerdown(e){!this.target||e.button!==0||(this.longpressState=\"potential\",document.addEventListener(\"pointerup\",this.handlePointerup),document.addEventListener(\"pointercancel\",this.handlePointerup),\"holdAffordance\"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"pointer\"}}))},g))}handleKeydown(e){const{code:t,altKey:o}=e;o&&t===\"ArrowDown\"&&(e.stopPropagation(),e.stopImmediatePropagation())}handleKeyup(e){const{code:t,altKey:o}=e;if(t===\"Space\"||o&&t===\"ArrowDown\"){if(!this.target)return;e.stopPropagation(),this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"keyboard\"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(e){if(this.releaseDescription!==r||!this.overlay.elements.length)return;const t=document.createElement(\"div\");t.id=`longpress-describedby-descriptor-${l()}`;const o=d()||a()?\"touch\":\"keyboard\";t.textContent=LONGPRESS_INSTRUCTIONS[o],t.slot=\"longpress-describedby-descriptor\";const n=e.getRootNode(),s=this.overlay.getRootNode();n===s?this.overlay.append(t):(t.hidden=!(\"host\"in n),e.insertAdjacentElement(\"afterend\",t));const i=p(e,\"aria-describedby\",[t.id]);this.releaseDescription=()=>{i(),t.remove(),this.releaseDescription=r}}shouldCompleteOpen(){this.longpressState=this.longpressState===\"pressed\"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"longpress\",()=>this.handleLongpress(),{signal:e}),this.target.addEventListener(\"pointerdown\",o=>this.handlePointerdown(o),{signal:e}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener(\"keydown\",o=>this.handleKeydown(o),{signal:e}),this.target.addEventListener(\"keyup\",o=>this.handleKeyup(o),{signal:e}))}}\n//# sourceMappingURL=LongpressController.js.map\n","\"use strict\";import{ClickController as o}from\"./ClickController.js\";import{HoverController as r}from\"./HoverController.js\";import{LongpressController as e}from\"./LongpressController.js\";export const strategies={click:o,longpress:e,hover:r};\n//# sourceMappingURL=strategies.js.map\n","\"use strict\";import{InteractionController as o,InteractionTypes as r}from\"./InteractionController.js\";export class ClickController extends o{constructor(){super(...arguments);this.type=r.click;this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"click\",()=>this.handleClick(),{signal:e}),this.target.addEventListener(\"pointerdown\",()=>this.handlePointerdown(),{signal:e})}}\n//# sourceMappingURL=ClickController.js.map\n","\"use strict\";import{conditionAttributeWithId as o}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as a}from\"@spectrum-web-components/shared/src/random-id.js\";import{InteractionController as l,InteractionTypes as h}from\"./InteractionController.js\";import{noop as s}from\"./AbstractOverlay.js\";const d=300;export class HoverController extends l{constructor(){super(...arguments);this.type=h.hover;this.elementIds=[];this.focusedin=!1;this.pointerentered=!1}handleTargetFocusin(){var e;(e=document.activeElement)!=null&&e.matches(\":focus-visible\")&&(this.open=!0,this.focusedin=!0)}handleTargetFocusout(){this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var e;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((e=this.overlay)!=null&&e.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;const e=this.target.getRootNode(),t=this.overlay.elements[0].getRootNode(),r=this.overlay.getRootNode();e===r?this.prepareOverlayRelativeDescription():e===t&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){const e=o(this.target,\"aria-describedby\",[this.overlay.id]);this.releaseDescription=()=>{e(),this.releaseDescription=s}}prepareContentRelativeDescription(){const e=[],t=this.overlay.elements.map(i=>(e.push(i.id),i.id||(i.id=`${this.overlay.tagName.toLowerCase()}-helper-${a()}`),i.id));this.elementIds=e;const r=o(this.target,\"aria-describedby\",t);this.releaseDescription=()=>{r(),this.overlay.elements.map((i,n)=>{i.id=this.elementIds[n]}),this.releaseDescription=s}}doPointerleave(){this.pointerentered=!1;const e=this.target;this.focusedin&&e.matches(\":focus-visible\")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},d))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"focusin\",()=>this.handleTargetFocusin(),{signal:e}),this.target.addEventListener(\"focusout\",()=>this.handleTargetFocusout(),{signal:e}),this.target.addEventListener(\"pointerenter\",()=>this.handleTargetPointerenter(),{signal:e}),this.target.addEventListener(\"pointerleave\",()=>this.handleTargetPointerleave(),{signal:e}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;const{signal:e}=this.abortController;this.overlay.addEventListener(\"pointerenter\",()=>this.handleHostPointerenter(),{signal:e}),this.overlay.addEventListener(\"pointerleave\",()=>this.handleHostPointerleave(),{signal:e})}}\n//# sourceMappingURL=HoverController.js.map\n"],"names":["r","InteractionTypes","click","hover","longpress","InteractionController","constructor","e","overlay","t","isPersistent","handleOverlayReady","i","this","target","init","activelyOpening","open","customElements","whenDefined","then","async","Overlay","import","n","a","_overlay","removeController","addController","initOverlay","prepareDescription","call","releaseDescription","shouldCompleteOpen","abort","abortController","hostConnected","hostDisconnected","overlayTimer","warmUpDelay","coolDownDelay","isWarm","timeout","Object","assign","openTimer","cancelCooldownTimer","component","close","promise","Promise","o","resolve","window","setTimeout","Error","resetCooldownTimer","clearTimeout","cooldownTimeout","noop","guaranteedAllTransitionend","v","AbortController","Map","cleanup","m","l","requestAnimationFrame","p","set","propertyName","get","delete","size","addEventListener","has","cancelAnimationFrame","signal","nextFrame","AbstractOverlay","g","arguments","dispose","offset","willPreventClose","applyFocus","delayed","disabled","elementResolver","_elementResolver","ensureOnDOM","makeTransition","manageDelay","manageDialogOpen","managePopoverOpen","managePosition","placementController","_placementController","requestSlottable","returnFocus","state","manuallyKeepOpen","update","CustomEvent","bubbles","composed","cancelable","document","dispatchEvent","length","d","remove","reparentChildren","position","prepareCallback","Array","c","createComment","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","T","b","s","slot","removeAttribute","u","applyOptions","hasAttribute","trigger","virtualTrigger","type","updateComplete","y","append","receivesFocus","triggerElement","placement","notImmediatelyClosable","navigator","test","platform","isIPhone","isIPad","maxTouchPoints","isIOS","isAndroid","userAgent","LONGPRESS_INSTRUCTIONS","touch","keyboard","mouse","strategies","preventNextToggle","handleClick","handlePointerdown","h","super","longpressState","handlePointerup","removeEventListener","handleLongpress","button","detail","source","handleKeydown","code","altKey","stopPropagation","stopImmediatePropagation","handleKeyup","elements","createElement","id","textContent","hidden","holdAffordance","elementIds","focusedin","pointerentered","handleTargetFocusin","activeElement","matches","handleTargetFocusout","handleTargetPointerenter","hoverTimeout","handleTargetPointerleave","doPointerleave","handleHostPointerenter","handleHostPointerleave","prepareOverlayRelativeDescription","prepareContentRelativeDescription","map","push","tagName","toLowerCase"],"mappings":"mFAeO,IAAKA,EAAAC,IAAAD,EAAAC,GAYL,IAXHD,EAAAE,MACAF,GAAAA,QAAAA,EAAAA,EAAAG,MAAA,GAAA,QACAH,EAAAA,EAAAI,UAAA,GAAA,YAHQJ,GAYL,MAAMK,EA8DTC,WAAAA,CACWC,GACLC,QAAAC,EAASC,aAAAV,EAAcW,mBAAAC,IADlBC,KAAAC,OAAAP,EALXM,KAAUH,cAAe,EAQrBG,KAAKH,eAAiBV,EACtBa,KAAKF,mBAAqBC,EACtBC,KAAKH,cACLG,KAAKE,OAETF,KAAKL,QAAUC,CACnB,CArEA,mBAAIO,GACA,OAAO,CACX,CAIA,QAAWC,GApCf,IAAAV,EAAAE,EAqCQ,OAAO,OAAAA,EAAA,OAAAF,EAAAM,KAAKL,gBAALD,EAAcU,OAAdR,CACX,CAKA,QAAWQ,CAAKV,GACRM,KAAKL,QAELK,KAAKL,QAAQS,KAAOV,EAGnBA,IAOLW,eACKC,YAAY,cACZC,MAAKC,UACF,MAAQC,QAAAb,SAAyBc,OAAA,qBACjCH,MAAA,SAAAI,GAAA,OAAAA,EAAAC,CAAA,IAAAZ,KAAKL,QAAU,IAAIC,EACnBI,KAAKL,QAAQS,MAAO,CACxB,IACJM,OAAO,qBAGX,CAAA,WAAWf,GACP,YAAYkB,QAChB,CAEA,WAAWlB,CAAQD,GAtEvB,IAAAE,EAuEaF,GACDM,KAAKL,UAAYD,IACjBM,KAAKL,SACLK,KAAKL,QAAQmB,iBAAiBd,MAElCA,KAAKa,SAAWnB,EAChBM,KAAKL,QAAQoB,cAAcf,MAC3BA,KAAKgB,cACLhB,KAAKiB,mBAAmBjB,KAAKC,QAC7B,OAAAL,EAAAI,KAAKF,qBAALF,EAAAsB,KAA0BlB,KAAAA,KAAKL,UAqBnCsB,kBAAAA,CAAmBvB,IAEnByB,kBAAAA,IAEAC,kBAAAA,IAGAlB,IAAAA,GAKAc,CAAAA,WAAAA,GAAoB,CAIpBK,KAAAA,GArHJ,IAAA3B,EAsHQM,KAAKmB,qBACL,OAAAzB,EAAAM,KAAKsB,kBAAL5B,EAAsB2B,OAC1B,CAEAE,aAAAA,GACIvB,KAAKE,OAGTsB,gBAAAA,GACSxB,KAAKH,cACNG,KAAKqB,OAGjB,ECtGa,MAAAI,EAAe,ICVf,MAYThC,WAAAA,CACIC,EAA4D,CAC9D,GAbFM,KAAQ0B,YAAc,IACtB1B,KAAQ2B,cAAgB,IAExB3B,KAAQ4B,QAAS,EAIjB5B,KAAQ6B,QAAU,EAOdC,OAAOC,OAAO/B,KAAMN,EACxB,CAEA,eAAasC,CAAUtC,GAGnB,GAFAM,KAAKiC,uBAEAjC,KAAKkC,WAAaxC,IAAcM,KAAKkC,UAOtC,OANSA,KAAAA,YACLlC,KAAKmC,MAAMnC,KAAKkC,WAChBlC,KAAKiC,uBAETjC,KAAKkC,UAAYxC,GAEbM,KAAK4B,SAIT5B,KAAKoC,QAAU,IAAIC,SAASC,IACxBtC,KAAKuC,QAAUD,EACftC,KAAK6B,QAAUW,OAAOC,YAAW,KACzBzC,KAAKuC,UACLvC,KAAKuC,SAAQ,GACbvC,KAAK4B,QAAS,EAEtB,GAAG5B,KAAK0B,YACZ,IACO1B,KAAKoC,SACT,GAAIpC,KAAKoC,QACZ,OAAOpC,KAAKoC,QAIZ,MAAM,IAAIM,MAAM,qBAExB,CAEOP,KAAAA,CAAMzC,GACLM,KAAKkC,WAAalC,KAAKkC,YAAcxC,IACrCM,KAAK2C,qBACD3C,KAAK6B,QAAU,IACfe,aAAa5C,KAAK6B,SAClB7B,KAAK6B,QAAU,GAEf7B,KAAKuC,UACLvC,KAAKuC,SAAQ,UACDA,KAAAA,qBAEJH,eACLpC,KAAKkC,UAIZS,CAAAA,kBAAAA,GACA3C,KAAK4B,SACD5B,KAAK6C,iBACLL,OAAOI,aAAa5C,KAAK6C,iBAE7B7C,KAAK6C,gBAAkBL,OAAOC,YAAW,KACrCzC,KAAK4B,QAAS,SACP5B,KAAK6C,eAChB,GAAG7C,KAAK2B,eAEhB,CAEQM,mBAAAA,GACAjC,KAAK6C,iBACLL,OAAOI,aAAa5C,KAAK6C,wBAEjBA,KAAAA,eAEpB,GDzEaC,EAAOA,OAYPC,EAA6BA,CACtChD,EACAiD,EACAtD,KAEA,MAAMP,EAAkB,IAAI8D,gBACtBtC,EAAqB,IAAIuC,IACzBtC,EAAUuC,KACZhE,EAAgBkC,QAChB3B,GACJ,EACA,IAAI0D,EACAC,EAIJ,MAAMzD,EAAa0D,uBAAsB,KACrCF,EAAaE,uBAAsB,KAC/BD,EAAaC,uBAAsB,KAC/B1C,GACJ,GACJ,GACJ,IACM2C,EAAuBjB,IACrBA,EAAMrC,SAAWF,IAGrBY,EAAmB6C,IACflB,EAAMmB,aACL9C,EAAmB+C,IAAIpB,EAAMmB,cAA2B,GAExD9C,EAAmB+C,IAAIpB,EAAMmB,eAC9B9C,EAAmBgD,OAAOrB,EAAMmB,cAEJ,IAA5B9C,EAAmBiD,MACnBhD,IAER,EAgBAb,EAAG8D,iBAAiB,iBAfSvB,IACrBA,EAAMrC,SAAWF,IAGhBY,EAAmBmD,IAAIxB,EAAMmB,eAC9B9C,EAAmB6C,IAAIlB,EAAMmB,aAAc,GAE/C9C,EAAmB6C,IACflB,EAAMmB,aACL9C,EAAmB+C,IAAIpB,EAAMmB,cAA2B,GAE7DM,qBAAqBnE,GACrBmE,qBAAqBX,GACrBW,qBAAqBV,GACzB,GAC0D,CACtDW,OAAQ7E,EAAgB6E,SAE5BjE,EAAG8D,iBAAiB,gBAAiBN,EAAqB,CACtDS,OAAQ7E,EAAgB6E,SAE5BjE,EAAG8D,iBAAiB,mBAAoBN,EAAqB,CACzDS,OAAQ7E,EAAgB6E,SAE5BhB,GACJ,EAEgB,SAAAiB,IACZ,OAAW,IAAA5B,SAAStC,GAAQuD,uBAAsB,IAAMvD,OAOrD,CAAA,MAAMmE,UAAwBC,EAA9B1E,WAAAA,YAAA2E,WAyBHpE,KAAAqE,QAAUvB,EAkCV9C,KAAUsE,OAAoC,EA+B9CtE,KAAAuE,kBAAmB,CAAA,CAzFnB,gBAAgBC,CACZ9E,EACAP,GAKJ,CAAA,WAAIsF,GACA,OAAO,CACX,CACA,WAAIA,CAAQ/E,GAQZ,CAAA,YAAIgF,GACA,OAAO,EAEX,YAAIA,CAAShF,GAAoB,CAIjC,mBAAciF,GACV,OAAYC,KAAAA,gBAEhB,CAAA,mBAAcD,CAAgBjF,GAC1BM,KAAK4E,iBAAmBlF,EAI5B,iBAAgBmF,CAAYnF,GAK5B,CAAA,oBAAgBoF,CACZpF,GAEA,OAAO,IAEX,CAAA,iBAAgBqF,CAAYrF,GAA0C,CAItE,sBAAgBsF,GAIhB,CAAA,uBAAgBC,GAINC,CAAAA,cAAAA,GAKV,CAAA,QAAI9E,GACA,OAAO,CACX,CACA,QAAIA,CAAKV,GAIT,CAAA,uBAAcyF,GACV,OAAOnF,KAAKoF,oBAEhB,CAAA,uBAAcD,CAAoBzF,GAC9BM,KAAKoF,qBAAuB1F,CAChC,CAGU2F,gBAAAA,GACAC,CAAAA,WAAAA,GAIV,CAAA,SAAIC,GACA,MAAO,QAEX,CAAA,SAAIA,CAAM7F,GAQH8F,CAAAA,gBAAAA,GAAyB,CAIhC,aAAcC,GACV,MAAM/F,EAAqB,IAAIgG,YAAY,qBAAsB,CAC7DC,SAAS,EACTC,UAAU,EACVC,YAAY,IAEhBC,SAASC,cAAcrG,EAmB3B,CAAA,iBAAoBU,CAChBV,EACAP,EAIAwB,EACAC,SAEMF,OAAO,qBACb,MAAM0C,EAA0B,IAArBgB,UAAU4B,OACf3C,EAAiB1C,GAAWjB,EAG5BE,EAAU,IAAII,KACpB,IAAIuD,GAAW,EACf3D,EAAQyE,QAAU,KACdzE,EAAQiE,iBAAiB,aAAa,KAC7BN,IACD0C,IACA1C,GAAW,GAEfD,uBAAsB,KAClB1D,EAAQsG,QACZ,GACJ,IACAtG,EAAQQ,MAAO,EACfR,EAAQyE,QAAUvB,CACtB,EAMA,MAAMmD,EE/OkBE,EAC5B7D,EACAvC,GAEIqG,SAAA/C,EACAgD,gBAAA3G,GAIA,CAAE0G,SAAU,gBAEhB,IAAMJ,OAAArF,GAAW2B,EACjB,GAAe,IAAX3B,EACA,MAAO,IAAM2B,EAGjB,IAAInD,EAAO,EACPS,EAAQ,GAEK,eAAbyD,GAA0C,aAAbA,KAC7BlE,GACAS,EAAAA,EAAQe,EAAS,GAGrB,MAAMC,EAAmB,IAAI0F,MAAe3F,GACtC4F,EAAmB,IAAID,MAAuB3F,GAC9C4C,EAA+BuC,SAASU,cAC1C,sCAGJ,EAAG,CACC,MAAMP,EAAa3D,EAAY1C,GAC3BF,IACA6G,EAAiB3G,GAASF,EAAgBuG,IAI9CrF,EAAiBhB,GAAS2D,EAAoBkD,YAE9C,MAAMrD,EACF6C,EAAWS,eAAiBT,EAAWU,cACvCvD,GAAiBA,IAAkB6C,GACnC7C,EAAcwD,aAAahG,EAAiBhB,GAAQqG,GAExDlG,EAAY8G,sBAAsBxD,EAAU4C,GAE5CrG,GAAST,UACFwB,EAAS,GAEpB,OAAO,WACH,OAvER,SACI2B,EACAvC,EACAsD,EAAwC,IAExC,IAAA,IAAS3D,EAAQ,EAAGA,EAAQK,EAAYiG,SAAUtG,EAAO,CACrD,MAAMiB,EAAaZ,EAAYL,GACzBP,EAAkBmD,EAAiB5C,GACnCE,EACFT,EAAgBuH,eAAiBvH,EAAgBwH,cACjDtD,EAAiB3D,IACjB2D,EAAiB3D,GAAOiB,GAExBf,GAAiBA,IAAkBT,GACnCS,EAAcgH,aAAajG,EAAYxB,UAEpCmD,EAAiB5C,EAC5B,CACA,OAAOK,CACX,CAoDe+G,CACHlG,EACA0B,EACAiE,EAGZ,CAAA,EFuL+BQ,CAAiB,CAAC1D,GAAiBzD,EAAS,CAC/DwG,SAAU,YACVC,gBAAkBW,IAGd,MAAMT,EAAOS,EAAGC,KAChB,OAAAD,EAAGE,gBAAgB,QACZ,KACHF,EAAGC,KAAOV,CACd,CACJ,IAIJ,IADYnD,GAAMC,GAAkBzC,EAC5B,CASJ,MAAMoG,EAAUtH,EACV6G,EAAcpH,EACdgI,EAAUvG,EAChB,OAAAsD,EAAgBkD,aAAaxH,EAAS,IAC/BuH,EACH1C,QACI0C,EAAQ1C,SAAWpB,EAAegE,aAAa,WACnDC,QAASH,EAAQI,gBAAkBP,EACnCQ,KACoB,UAAhBjB,EACM,QACgB,UAAhBA,EACA,OACA,SAEdS,EAAQH,sBAAsB,WAAYjH,SACpCA,EAAQ6H,eACd7H,EAAQQ,MAAO,EACRR,EAAQyE,OAGnB,CAAA,MAAMqD,EAAUvI,EAChB,OAAAS,EAAQ+H,OAAOtE,GACfa,EAAgBkD,aAAaxH,EAAS,IAC/B8H,EACHjD,QAASiD,EAAQjD,SAAWpB,EAAegE,aAAa,aAE5DzH,EAAQ6H,eAAelH,MAAK,KAExBX,EAAQQ,MAAO,CACnB,IACOR,EAGX,mBAAOwH,CACH1H,EACAP,GA1UR,IAAAwB,EAAAC,EA4UQlB,EAAQ+E,UAAYtF,EAAQsF,QAC5B/E,EAAQkI,cAAgB,OAAAjH,EAAAxB,EAAQyI,eAARjH,EAAyB,OACjDjB,EAAQmI,eAAiB1I,EAAQmI,SAAW,KAC5C5H,EAAQ8H,KAAOrI,EAAQqI,MAAQ,QAC/B9H,EAAQ4E,OAAS,OAAA1D,EAAAzB,EAAQmF,QAAR1D,EAAkB,EACnClB,EAAQoI,UAAY3I,EAAQ2I,UAC5BpI,EAAQ6E,mBAAqBpF,EAAQ4I,sBAE7C,EGlUA,SAASrI,EAAa4C,GAClB,MAAyB,oBAAXE,QAA8C,MAApBA,OAAOwF,WACzC1F,EAAG2F,KAAKzF,OAAOwF,UAAUE,UAS5B,SAASC,IACZ,OAAOzI,EAAa,UACxB,UAEgB0I,IACZ,OACI1I,EAAa,UATVA,EAAa,SAWJsI,UAAUK,eAAiB,EAI/B,SAAAC,IACZ,OAAOH,KAAcC,GACzB,CAyBgB,SAAAG,IACZ,OAzDmBjG,EAyDE,UAxDI,oBAAXE,QAA8C,MAApBA,OAAOwF,WACzC1F,EAAG2F,KAAKzF,OAAOwF,UAAUQ,WAFnC,IAAuBlG,CA0DvB,CC7CA,MACamG,EAAyB,CAClCC,MAAO,mDACPC,SAAU,uDACVC,MAAO,yCCbE,MAAAC,EAAa,CACtBxJ,MCAS,cAAwBiD,EAA9B7C,WAAAA,GAAA2E,SAAAA,WACHpE,KAASwH,KAAOrI,EAAiBE,MAQjCW,KAAQ8I,mBAAoB,CAAA,CAE5BC,WAAAA,GACS/I,KAAK8I,oBACN9I,KAAKI,MAAQJ,KAAKI,MAEtBJ,KAAK8I,mBAAoB,CAC7B,CAEAE,iBAAAA,GACIhJ,KAAK8I,kBAAoB9I,KAAKI,IAGzBF,CAAAA,IAAAA,GAvCb,IAAAN,EAyCQ,OAAAA,EAAK0B,KAAAA,kBAAL1B,EAAsByB,QACtBrB,KAAKsB,gBAAkB,IAAI2B,gBAC3B,MAAQe,OAAAtE,GAAWM,KAAKsB,gBACxBtB,KAAKC,OAAO4D,iBAAiB,SAAS,IAAM7D,KAAK+I,eAAe,CAC5D/E,OAAAtE,IAEJM,KAAKC,OAAO4D,iBACR,eACA,IAAM7D,KAAKgJ,qBACX,CAAEhF,OAAAtE,GAGd,GDnCIH,UDkBG,cAAkC0J,EAAlCxJ,WAAAA,GAAAyJ,SAAA9E,WACHpE,KAASwH,KAAOjB,EAAiBhH,UASjCS,KAAUmJ,eAA6D,KAEvEnJ,KAASmB,mBAAqBhC,EAiC9Ba,KAAQoJ,gBAAkB,KAjF9B,IAAA1J,EAkFQkD,aAAa5C,KAAK6B,SACb7B,KAAKC,SAKVD,KAAKmJ,eACuB,aAAxB,OAAAzJ,EAAAM,KAAKL,gBAALD,EAAc6F,OAAsB,UAAY,KACpDO,SAASuD,oBAAoB,YAAarJ,KAAKoJ,iBAC/CtD,SAASuD,oBAAoB,gBAAiBrJ,KAAKoJ,iBACvD,EArDA,mBAAajJ,GACT,MAC4B,YAAxBH,KAAKmJ,gBACmB,YAAxBnJ,KAAKmJ,eAUbG,eAAAA,GACItJ,KAAKI,MAAO,EACZJ,KAAKmJ,eACuB,cAAxBnJ,KAAKmJ,eAAiC,UAAY,SAG1DH,CAAAA,iBAAAA,CAAkBtJ,IACTM,KAAKC,QACW,IAAjBP,EAAM6J,SACVvJ,KAAKmJ,eAAiB,YACtBrD,SAASjC,iBAAiB,YAAa7D,KAAKoJ,iBAC5CtD,SAASjC,iBAAiB,gBAAiB7D,KAAKoJ,iBAEhB,mBAAoBpJ,KAAKC,UAEzDD,KAAK6B,QAAUY,YAAW,KACjBzC,KAAKC,QACVD,KAAKC,OAAO8F,cACR,IAAIL,YAA4B,YAAa,CACzCC,SAAS,EACTC,UAAU,EACV4D,OAAQ,CACJC,OAAQ,aAIxB,GArDmB,KAqEfC,CAAAA,aAAAA,CAAchK,GAClB,MAAQiK,KAAA/J,EAAMgK,OAAAtH,GAAW5C,EACrB4C,GAAmB,cAAT1C,IACVF,EAAMmK,kBACNnK,EAAMoK,2BAINC,CAAAA,WAAAA,CAAYrK,GAChB,MAAQiK,KAAA/J,EAAMgK,OAAAtH,GAAW5C,EACzB,GAAa,UAATE,GAAqB0C,GAAmB,cAAT1C,EAAuB,CACtD,IAAKI,KAAKC,OACN,OAEJP,EAAMmK,kBACN7J,KAAKC,OAAO8F,cACR,IAAIL,YAA4B,YAAa,CACzCC,SAAS,EACTC,UAAU,EACV4D,OAAQ,CACJC,OAAQ,eAIpBhH,YAAW,KACPzC,KAAKmJ,eAAiB,IAC1B,GACJ,CACJ,CAESlI,kBAAAA,CAAmBvB,GACxB,GAEIM,KAAKmB,qBAAuBhC,IAE3Ba,KAAKL,QAAQqK,SAAShE,OAEvB,OAGJ,MAAMpG,EAAuBkG,SAASmE,cAAc,OACpDrK,EAAqBsK,GAAK,oCAAoC7G,MAC9D,MAAMf,EAAc2D,KAAWrF,IAAc,QAAU,WACvDhB,EAAqBuK,YAAc1B,EAAuBnG,GAC1D1C,EAAqBqH,KAAO,mCAC5B,MAAMtG,EAAgBjB,EAAQiH,cAI1BhG,IAHkBX,KAAKL,QAAQgH,cAM/B3G,KAAKL,QAAQgI,OAAO/H,IAGpBA,EAAqBwK,SAAW,SAAUzJ,GAG1CjB,EAAQmH,sBAAsB,WAAYjH,IAG9C,MAAMG,EAAqBwD,EACvB7D,EACA,mBACA,CAACE,EAAqBsK,KAE1BlK,KAAKmB,mBAAqB,KACtBpB,IACAH,EAAqBsG,SACrBlG,KAAKmB,mBAAqBhC,CAC9B,CAGKiC,CAAAA,kBAAAA,GAKLpB,KAAKmJ,eACuB,YAAxBnJ,KAAKmJ,eAA+B,KAAOnJ,KAAKmJ,cACxD,CAESjJ,IAAAA,GAhLb,IAAAN,EAkLQ,OAAAA,EAAK0B,KAAAA,kBAAL1B,EAAsByB,QACtBrB,KAAKsB,gBAAkB,IAAI2B,gBAC3B,MAAQe,OAAAtE,GAAWM,KAAKsB,gBACxBtB,KAAKC,OAAO4D,iBACR,aACA,IAAM7D,KAAKsJ,mBACX,CAAEtF,OAAAtE,IAENM,KAAKC,OAAO4D,iBACR,eACCvB,GAAwBtC,KAAKgJ,kBAAkB1G,IAChD,CAAE0B,OAAAtE,IAGNM,KAAKiB,mBAAmBjB,KAAKC,SAEnBA,KAAAA,OACDoK,iBAKTrK,KAAKC,OAAO4D,iBACR,WACCvB,GAAyBtC,KAAK0J,cAAcpH,IAC7C,CAAE0B,OAAAtE,IAENM,KAAKC,OAAO4D,iBACR,SACCvB,GAAyBtC,KAAK+J,YAAYzH,IAC3C,CAAE0B,OAAAtE,IAGd,GChMIJ,MEIS,cAAwB+D,EAA9B5D,WAAAA,YAAA2E,WACHpE,KAASwH,KAAOyB,EAAiB3J,MAEjCU,KAAQsK,WAAuB,GAE/BtK,KAAAuK,WAAY,EAIZvK,KAAAwK,gBAAiB,CAAA,CAEjBC,mBAAAA,GAlCJ,IAAA/K,EAoCa,OAAAA,EAAAoG,SAAS4E,gBAAThL,EAAwBiL,QAAQ,oBAGrC3K,KAAKI,MAAO,EACZJ,KAAKuK,WAAY,EACrB,CAEAK,oBAAAA,GACI5K,KAAKuK,WAAY,GACRC,KAAAA,iBACTxK,KAAKI,MAAO,EAGhByK,CAAAA,wBAAAA,GAjDJ,IAAAnL,EAkDYM,KAAK8K,eACLlI,aAAa5C,KAAK8K,cAClB9K,KAAK8K,kBAAe,IAEpB,OAAApL,EAAAM,KAAKL,WAALD,EAAcgF,YAClB1E,KAAKI,MAAO,EACZJ,KAAKwK,gBAAiB,EAC1B,CAEAO,wBAAAA,GACI/K,KAAKgL,gBAKTC,CAAAA,sBAAAA,GACQjL,KAAK8K,eACLlI,aAAa5C,KAAK8K,cAClB9K,KAAK8K,kBAAe,EAE5B,CAEAI,sBAAAA,GACIlL,KAAKgL,gBAGA/J,CAAAA,kBAAAA,GAEL,IAAKjB,KAAKL,QAAQqK,SAAShE,OAAQ,OAEnC,MAAMtG,EAAcM,KAAKC,OAAO0G,cAC1B/G,EAAcI,KAAKL,QAAQqK,SAAS,GAAGrD,cAEzCjH,IADgBM,KAAKL,QAAQgH,cAE7B3G,KAAKmL,oCACEzL,IAAgBE,GACvBI,KAAKoL,mCAEb,CAEQD,iCAAAA,GACJ,MAAMzL,EAAqB4C,EACvBtC,KAAKC,OACL,mBACA,CAACD,KAAKL,QAAQuK,KAElBlK,KAAKmB,mBAAqB,KACtBzB,IACAM,KAAKmB,mBAAqB6F,CAC9B,CACJ,CAEQoE,iCAAAA,GACJ,MAAM1L,EAAuB,GACvBE,EAAaI,KAAKL,QAAQqK,SAASqB,KAAKtL,IAC1CL,EAAW4L,KAAKvL,EAAGmK,IACdnK,EAAGmK,KACJnK,EAAGmK,GAAK,GAAGlK,KAAKL,QAAQ4L,QAAQC,wBAAwB5K,OAErDb,EAAGmK,MAEdlK,KAAKsK,WAAa5K,EAClB,MAAMP,EAAqBmD,EACvBtC,KAAKC,OACL,mBACAL,GAEJI,KAAKmB,mBAAqB,KACtBhC,IACAa,KAAKL,QAAQqK,SAASqB,KAAI,CAACtL,EAAIY,KAC3BZ,EAAGmK,GAAKlK,KAAKsK,WAAW3J,EAC5B,IACAX,KAAKmB,mBAAqB6F,CAC9B,CAGMgE,CAAAA,cAAAA,GACNhL,KAAKwK,gBAAiB,EACtB,MAAM9K,EAAiBM,KAAKC,OACxBD,KAAKuK,WAAa7K,EAAeiL,QAAQ,oBAE7C3K,KAAK8K,aAAerI,YAAW,KAC3BzC,KAAKI,MAAO,CAChB,GAhHY,KAmHPF,CAAAA,IAAAA,GAxIb,IAAAN,EA0IQ,OAAAA,EAAAI,KAAKsB,kBAAL1B,EAAsByB,QACtBrB,KAAKsB,gBAAkB,IAAI2B,gBAC3B,MAAQe,OAAAtE,GAAWM,KAAKsB,gBACxBtB,KAAKC,OAAO4D,iBACR,WACA,IAAM7D,KAAKyK,uBACX,CAAEzG,OAAAtE,IAENM,KAAKC,OAAO4D,iBACR,YACA,IAAM7D,KAAK4K,wBACX,CAAE5G,OAAAtE,IAENM,KAAKC,OAAO4D,iBACR,gBACA,IAAM7D,KAAK6K,4BACX,CAAE7G,OAAAtE,IAENM,KAAKC,OAAO4D,iBACR,gBACA,IAAM7D,KAAK+K,4BACX,CAAE/G,OAAAtE,IAEFM,KAAKL,SACLK,KAAKgB,aAIJA,CAAAA,WAAAA,GACL,IAAKhB,KAAKsB,gBACN,OAEJ,MAAQ0C,OAAAtE,GAAWM,KAAKsB,gBACxBtB,KAAKL,QAAQkE,iBACT,gBACA,IAAM7D,KAAKiL,0BACX,CAAEjH,OAAAtE,IAENM,KAAKL,QAAQkE,iBACT,gBACA,IAAM7D,KAAKkL,0BACX,CAAElH,OAAAtE,GAGd"}